
def make_controller(table_name):
    filename = f"./{table_name}s.py"
    os.makedirs(os.path.dirname(filename), exist_ok=True)
    with open(filename, 'a') as f:
        f.write(f"from flask import render_template, request, redirect\n")
        f.write("from flask_app import app\n")
        f.write(f"{table_name} import {table_name.capitalize()}\n\n")
        f.write("@app.route('/')\n")
        f.write("def index():\n")
        f.write(f"    return redirect('/{table_name}')\n\n")
        f.write(f"@app.route('/{table_name}')\n")
        f.write(f"def {table_name}():\n")
        f.write(f"    return render_template('index.html',{table_name}s={table_name.capitalize()}.get_all())\n\n")
        f.write(f"@app.route('/{table_name}/new')\n")
        f.write("def new():\n")
        f.write(f"    return render_template('new_{table_name}.html')\n\n")
        f.write(f"@app.route('/{table_name}/create', methods=['POST'])\n")
        f.write("def create():\n")
        f.write("    print(request.form)\n")
        f.write(f"    {table_name.capitalize()}.save(request.form)\n")
        f.write(f"    return redirect('/{table_name}')\n\n")
        f.write(f"@app.route('/{table_name}/edit/<int:id>')\n")
        f.write("def edit(id):\n")
        f.write("    data ={ \n")
        f.write("        'id':id\n")
        f.write("    }\n")
        f.write(f"    return render_template('edit_{table_name}.html',{table_name}={table_name.capitalize()}.get_one(data))\n\n")
        f.write(f"@app.route('/{table_name}/show/<int:id>')\n")
        f.write("def show(id):\n")
        f.write("    data ={ \n")
        f.write("        'id':id\n")
        f.write("    }\n")
        f.write(f"    return render_template('show_{table_name}.html',{table_name}={table_name.capitalize()}.get_one(data))\n\n")
        f.write(f"@app.route('/{table_name}/update',methods=['POST'])\n")
        f.write("def update():\n")
        f.write(f"    {table_name.capitalize()}.update(request.form)\n")
        f.write(f"    return redirect('/{table_name}')\n\n")
        f.write(f"@app.route('/{table_name}/destroy/<int:id>')\n")
        f.write("def destroy(id):\n")
        f.write("    data ={\n")
        f.write("        'id': id\n")
        f.write("    }\n")
        f.write(f"    {table_name.capitalize()}.destroy(data)\n")
        f.write(f"    return redirect('/{table_name}')\n\n")

make_controller(sys.argv[1])